---
import { withBase } from "../utils/withBase";
import NavigationItems from "./NavigationItems.astro";
---

<nav class="pl-0 pr-6 md:px-4 py-2">
  <div class="flex items-center justify-between">
    <a href={withBase()} class="h-14 md:h-18">
      <img
        src={withBase("/goheader.png")}
        alt="Go Workshop Conference 2025 IN KOBE"
        class="w-full h-full"
      />
    </a>
    
    <!-- PC時のナビゲーション（右側） -->
    <NavigationItems className="hidden md:flex gap-4 md:text-xl" />
    
    <!-- SP時のハンバーガーメニュー（右側） -->
    <div class="md:hidden">
      <input type="checkbox" id="menu-toggle" class="hidden peer" />
      
      <label class="w-10 h-8 cursor-pointer relative flex flex-col justify-center gap-1.5" for="menu-toggle">
        <span class="block h-1 bg-gray-800 rounded-sm duration-300"></span>
        <span class="block h-1 bg-gray-800 rounded-sm duration-300"></span>
        <span class="block h-1 bg-gray-800 rounded-sm duration-300"></span>
      </label>
      
      <div class="fixed inset-0 bg-black/50 opacity-0 pointer-events-none transition-opacity duration-300 z-10 peer-checked:opacity-100 peer-checked:pointer-events-auto"></div>
      
      <div class="absolute right-0 w-48 bg-white shadow-lg rounded-lg opacity-0 invisible -translate-x-4 -translate-y-0 transition-all duration-300 ease-in-out z-20 p-4 peer-checked:opacity-100 peer-checked:visible peer-checked:translate-y-0">
        <NavigationItems className="flex flex-col gap-2" linkClassName="block py-2" />
      </div>
    </div>
  </div>
</nav>

<style>
  #menu-toggle:checked ~ label span:nth-child(1) {
    transform: translateY(10px) rotate(45deg);
  }
  #menu-toggle:checked ~ label span:nth-child(2) {
    opacity: 0;
  }
  #menu-toggle:checked ~ label span:nth-child(3) {
    transform: translateY(-10px) rotate(-45deg);
  }
</style>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    const menuToggle = document.getElementById('menu-toggle') as HTMLInputElement;
    const overlay = document.querySelector('.fixed.inset-0');

    if (overlay && menuToggle) {
      overlay.addEventListener('click', function() {
        menuToggle.checked = false;
      });
    }
  });
</script>

